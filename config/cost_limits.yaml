# Cost Management Configuration
# Total Daily Budget: $5.00

daily_budget:
  total_limit: 5.00  # Hard cap per day
  alert_threshold: 4.00  # Alert at 80%
  
per_model_budgets:
  # Primary Models
  claude-sonnet-4:
    daily_limit: 3.00
    cost_per_1k_tokens:
      input: 0.003
      output: 0.015
    typical_workflow_cost: 0.03
    max_workflows_per_day: 100  # = $3.00 / $0.03
    
  # Fallback Models  
  claude-sonnet-3.5:
    daily_limit: 1.50
    cost_per_1k_tokens:
      input: 0.003
      output: 0.015
    typical_workflow_cost: 0.03
    max_workflows_per_day: 50
    
  claude-haiku-3.5:
    daily_limit: 0.50
    cost_per_1k_tokens:
      input: 0.00025
      output: 0.00125
    typical_workflow_cost: 0.003
    max_workflows_per_day: 166  # Very cheap!
    
  gpt-4o:
    daily_limit: 1.00
    cost_per_1k_tokens:
      input: 0.0025
      output: 0.010
    typical_workflow_cost: 0.025
    max_workflows_per_day: 40
    
  gpt-4o-mini:
    daily_limit: 0.25
    cost_per_1k_tokens:
      input: 0.00015
      output: 0.0006
    typical_workflow_cost: 0.002
    max_workflows_per_day: 125  # Very cheap!

# Workflow Cost Breakdown
workflow_costs:
  stage_1_trigger:
    cost: 0.00  # No LLM calls
    
  stage_2_filtering:
    tokens_estimate: 500
    cost_estimate: 0.01  # With Claude Sonnet
    
  stage_3_scoring:
    tokens_estimate: 1000
    cost_estimate: 0.02  # With Claude Sonnet
    
  stage_4_consent:
    tokens_estimate: 300
    cost_estimate: 0.005  # With Claude Sonnet
    
  stage_5_booking:
    cost: 0.00  # No LLM calls
    
  stage_6_audit:
    cost: 0.00  # No LLM calls
    
  total_per_workflow: 0.035  # ~$0.03-0.04

# Daily Usage Scenarios
usage_scenarios:
  light_usage:
    workflows_per_day: 10
    estimated_cost: 0.35
    well_under_budget: true
    
  medium_usage:
    workflows_per_day: 50
    estimated_cost: 1.75
    well_under_budget: true
    
  heavy_usage:
    workflows_per_day: 100
    estimated_cost: 3.50
    well_under_budget: true
    
  extreme_usage:
    workflows_per_day: 140
    estimated_cost: 4.90
    near_budget_limit: true

# Cost Optimization Strategies
optimization:
  caching:
    enabled: true
    savings: "30-50%"
    note: "Caches identical requests for 1 hour"
    
  model_routing:
    strategy: "Use Haiku for simple tasks, Sonnet for complex"
    savings: "20-40%"
    
  prompt_optimization:
    strategy: "Minimize token count in prompts"
    savings: "10-20%"
    
  fallback_chain:
    primary: "claude-sonnet-4"
    fallback_1: "claude-haiku-3.5"  # Much cheaper!
    fallback_2: "gpt-4o-mini"  # Even cheaper!
    note: "Use cheaper models as fallbacks"

# Monitoring & Alerts
monitoring:
  check_interval: "hourly"
  alert_channels:
    - "logs"
    - "email"  # Configure in LangFuse
  
  alerts:
    - condition: "daily_cost > $4.00"
      action: "Send warning email"
    - condition: "daily_cost > $5.00"
      action: "Block all LLM calls until next day"
    - condition: "single_request > $0.50"
      action: "Log high-cost request"

# Budget Recommendations
recommendations:
  demo_mode: 
    use: "Mock LLM"
    cost: "$0"
    
  development:
    daily_budget: "$1-2"
    use: "Claude Haiku mostly"
    
  staging:
    daily_budget: "$3-5"
    use: "Mix of Haiku and Sonnet"
    
  production:
    daily_budget: "$5-20"
    use: "Claude Sonnet with Haiku fallback"
    add: "Load balancing + caching"

